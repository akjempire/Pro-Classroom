<% layout('layouts/boilerplate') %>
<style>
  h2 {
    text-align: center;
  }
  .error-message {
    color: red;
    font-size: 14px;
    display: none;
  }
</style>

<div class="row m-auto">
  <h2 class="table-heading">Upload Assignment for Class: <%= classroom.name %></h2>

  <form id="assignmentForm" action="/teacher/class/<%= classroom._id %>/upload-assignment" method="POST" class="needs-validation" novalidate enctype="multipart/form-data">
    <div class="col col-8 m-auto">

      <div class="form-group">
        <label for="title">Assignment Title:</label>
        <input type="text" name="title" required class="form-control">
      </div>

      <div class="form-group">
        <label for="description">Description:</label>
        <textarea name="description" required class="form-control"></textarea>
      </div>

      <div class="form-group">
        <label for="assignment">Upload Assignment</label>
        <input type="file" id="assignmentFile" name="assignment[assignment]" class="form-control" required>
        <p id="fileError" class="error-message">File size must be less than 10 MB</p>
      </div>

      <div class="form-group">
        <label for="deadline">Deadline:</label>
        <input type="datetime-local" name="deadline" required class="form-control">
      </div>
      
      <div class="text-center mt-4">
        <button type="submit" class="btn-create">Upload Assignment</button>
      </div>
    </div>
  </form>
</div>

<script>
  const form = document.getElementById('assignmentForm');
  const fileInput = document.getElementById('assignmentFile');
  const fileError = document.getElementById('fileError');
  const MAX_SIZE = 10 * 1024 * 1024; // 10 MB in bytes

  form.addEventListener('submit', function(event) {
    const file = fileInput.files[0];
    if (file && file.size > MAX_SIZE) {
      event.preventDefault(); // Stop form submission
      fileError.style.display = 'block'; // Show error message
    } else {
      fileError.style.display = 'none';
    }
  });
</script>
